library(RPostgreSQL)
con <- dbConnect(RPostgres::Postgres())
con <- dbConnect(RPostgreSQL::Postgres())
con <- dbConnect(RPostgreSQL::RPostgreSQL())
library(RPostgres)
install.packages("RPostgres")
con <- dbConnect(RPostgres::RPostgres())
con <- dbConnect(RPostgres::RPostgres(), ":memory:")
con <- DBI::dbConnect(RPostgres::Postgres(),
dbname = "postgres",
host = 'localhost',
port = 5432,
user = "postgres",
password = "2757")
con
con <- DBI::dbConnect(RPostgres::Postgres(),
dbname = "ltmn_veg",
host = 'localhost',
port = 5432,
user = "Kieran",
password = "2757")
con <- DBI::dbConnect(RPostgres::Postgres(),
dbname = "ltmn_veg",
host = 'localhost',
port = 5432,
user = "kieran",
password = "2757")
con
library(tidyverse)
library(dplyr)
library(readxl) # reading in the excel files
laptop_dir <- 'C:/Users/kiera/Work/NE_work/Vegetation/postgresql/'
setwd(laptop_dir)
file_dir <- '../Data/All_data_old/'
list_of_files <- list.files(file_dir)
codes <-c()
for (ii in 1:length(list_of_files)) {
file_path <- paste(file_dir, list_of_files[ii], sep='')
wpd <- read_excel(file_path, sheet = "Whole Plot Data")
codes <- c(codes, wpd$SITECODE[1])
}
list_of_files_u <- list_of_files %>%
substr(.,1,nchar(list_of_files)-32) %>%
unique()
df <- data.frame(Sitecode = unique(codes),
Name = list_of_files_u,
veg_surveys = 0)
library(dbplyr)
df_site <- data.frame(Sitecode = unique(codes),
Name = list_of_files_u,
veg_surveys = 0)
copy_to(con, df_site)
df_test <- tbl(con, "sites")
View(df_test)
df_test[["ops"]]
df_test[["ops"]]
dbWriteTable(con, "Site_list", value = df, overwrite = T, append = F, row.names = FALSE)
dbWriteTable(con, "site_list", value = df, overwrite = T, append = F, row.names = FALSE)
df_test <- tbl(con, "site_list")
View(df_test)
dbListTables(con)
df_test <- dbGetQuery(con, "SELECT * FROM site_list;")
View(df_test)
setwd('C:/Users/kiera/Work/NE_work/Weather/')
data_dir <- './Data/MET/'
data_files <- list.files(data_dir)
dat1 <- brick(paste0(data_dir, data_files[[1]]))
library(raster)
dat1 <- brick(paste0(data_dir, data_files[[1]]))
dat1
dat1 <- brick(paste0(data_dir, data_files[[1]]))
dat1 <- brick(paste0(data_dir, data_files[[2]]))
dat1
plot(snap1)
snap1 <- dat1[[23]]
plot(snap1)
site_perimeter <- extent(400000, 600000, 200000, 400000)
snap1.crop <- crop(snap1, site_perimeter)
plot(snap1.crop)
snap1 <- dat1[[23]]
plot(snap1)
df_coords <- data.frame(EASTINGS = c(500000, 600000),
NORTHINGS = c(200000, 400000))
View(df_coords)
coordinates(df_coords) <- c("EASTINGS", "NORTHINGS")
proj4string(df_coords) <- CRS("+init=epsg:27700")
plotsWGS <- spTransform(df_coords, CRS("+init=epsg:4326"))
coordinates(df_coords) <- c("EASTINGS", "NORTHINGS")
proj4string(df_coords) <- CRS("+init=epsg:27700")
library(rgdal)
proj4string(df_coords) <- CRS("+init=epsg:27700")
library(sp)
EPSG <- make_EPSG()
file_name <- 'Ingleborough_LTMN_Vegetation_2010_MAVIS.XLSX'
plots <- read.xlsx(file_name, sheet = 2, skipEmptyRows = TRUE)
library(openxlsx)
file_name <- 'Ingleborough_LTMN_Vegetation_2010_MAVIS.XLSX'
plots <- read.xlsx(file_name, sheet = 2, skipEmptyRows = TRUE)
coordinates(plots) <- c("EASTINGS", "NORTHINGS")
proj4string(plots) <- CRS("+init=epsg:27700")
plotsWGS <- spTransform(plots, CRS("+init=epsg:4326"))
#add converted coordinates to original plot table
plots$Latitude <- plotsWGS@coords[,2]
plots$Longitude <- plotsWGS@coords[,1]
plots <- head(plots, -1)
coordinates(plots) <- c("EASTINGS", "NORTHINGS")
proj4string(plots) <- CRS("+init=epsg:27700")
laptop_dir <- 'C:/Users/kiera/Work/NE_work/Vegetation/NBN/'
setwd(laptop_dir)
library('openxlsx')
library('rgdal')
library('uuid')
library('zoo')
file_name <- '../Data/Data_set/Ingleborough_LTMN_Vegetation_2010_MAVIS.XLSX'
plots <- read.xlsx(file_name, sheet = 2, skipEmptyRows = TRUE)
species <- read.xlsx(file_name, sheet = 3, skipEmptyRows = TRUE)
#manually check for any empty rows at end and delete
plots <- head(plots, -1) ##########MANUAL CHANGE
View(plots)
coordinates(plots) <- c("EASTINGS", "NORTHINGS")
proj4string(plots) <- CRS("+init=epsg:27700")
View(plots)
coordinates(plots@data) <- c("EASTINGS", "NORTHINGS")
proj4string(plots@data) <- CRS("+init=epsg:27700")
plots@data
file_name <- '../Data/Data_set/Ingleborough_LTMN_Vegetation_2010_MAVIS.XLSX'
plots <- read.xlsx(file_name, sheet = 2, skipEmptyRows = TRUE)
species <- read.xlsx(file_name, sheet = 3, skipEmptyRows = TRUE)
proj4string(plots) <- CRS("+init=epsg:27700")
View(plots)
plotsWGS <- spTransform(plots, CRS("+init=epsg:4326"))
plots@proj4string@projargs
plots@proj4string@projargs <- "+init=epsg:27700"
coordinates(plots) <- c("EASTINGS", "NORTHINGS")
plots@proj4string@projargs <- "+init=epsg:27700"
plotsWGS <- spTransform(plots, CRS("+init=epsg:4326"))
file_name <- 'Ingleborough_LTMN_Vegetation_2010_MAVIS.XLSX'
plots <- read.xlsx(file_name, sheet = 2, skipEmptyRows = TRUE)
coordinates(plots) <- c("EASTINGS", "NORTHINGS")
proj4string(plots) <- projection("+init=epsg:27700")
plotsWGS <- spTransform(plots, projection("+init=epsg:4326"))
proj4string(plots) <- CRS("+proj=longlat +datum=WGS84")
df_coords2 <- data.frame(EASTINGS = c(23, 34),
NORTHINGS = c(23, 12))
coordinates(df_coords2) <- c("EASTINGS", "NORTHINGS")
proj4string(df_coords2) <- CRS("+proj=longlat +datum=WGS84")
plotsWGS <- spTransform(df_coords2, projection("+init=epsg:27700"))
plotsWGS <- spTransform(df_coords2, projection("+init=epsg:4326"))
df_coords <- data.frame(EASTINGS = c(500000, 600000),
NORTHINGS = c(200000, 400000))
coordinates(df_coords) <- c("EASTINGS", "NORTHINGS")
proj4string(df_coords) <- CRS("+proj=tmerc +lat_0=49 +lon_0=-2 +k=0.9996012717 +x_0=400000 +y_0=-100000 +ellps=airy +towgs84=446.448,-125.157,542.06,0.15,0.247,0.842,-20.489 +units=m +no_defs")
plotsWGS <- spTransform(df_coords2, projection("+proj=longlat +datum=WGS84"))
View(plotsWGS)
library(raster)
library(rgdal)
library(sp)
library(openxlsx)
df_coords <- data.frame(EASTINGS = c(500000, 600000),
NORTHINGS = c(200000, 400000))
coordinates(df_coords) <- c("EASTINGS", "NORTHINGS")
proj4string(df_coords) <- CRS("+proj=tmerc +lat_0=49 +lon_0=-2 +k=0.9996012717 +x_0=400000 +y_0=-100000 +ellps=airy +towgs84=446.448,-125.157,542.06,0.15,0.247,0.842,-20.489 +units=m +no_defs")
plotsWGS <- spTransform(df_coords2, projection("+proj=longlat +datum=WGS84"))
plotsWGS <- spTransform(df_coords2, CRS("+proj=longlat +datum=WGS84"))
proj4string(df_coords) <- projection("+proj=tmerc +lat_0=49 +lon_0=-2 +k=0.9996012717 +x_0=400000 +y_0=-100000 +ellps=airy +towgs84=446.448,-125.157,542.06,0.15,0.247,0.842,-20.489 +units=m +no_defs")
plotsWGS <- spTransform(df_coords2, projection("+proj=longlat +datum=WGS84"))
plotsWGS <- spTransform(df_coords, projection("+proj=longlat +datum=WGS84"))
View(plotsWGS)
df_coords$Latitude <- plotsWGS@coords[,2]
df_coords$Longitude <- plotsWGS@coords[,1]
View(df_coords)
View(df_coords)
df_coords@data
