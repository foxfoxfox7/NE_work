setwd("C:/Users/kiera/Work/NE_work/Report")
getwd()
source('./data_prep_figure4.R')
################################################################################
name_swap_bap <- get_names('./dataframes/rename_habitat.csv')[[1]]
name_swap_nvc <- get_names('./dataframes/rename_habitat.csv')[[2]]
bb_list <- get_names('./dataframes/rename_habitat.csv')[[3]]
bp_list <- get_names('./dataframes/rename_habitat.csv')[[4]]
#df_all <- read_all_data('all_plots.csv')
df_all <- read_csv('./dataframes/all_plots.csv') %>%
fix_names(., name_swap_bap) %>%
# transform the eastings and northings into latitude and longitude
transform_coords(.) %>%
distinct(Plot_ID, Sitecode, Year, .keep_all = TRUE)
# Converts the NVC abbreviations to the full names
df_all$NVC_habitat <- name_swap(df_all$NVC_habitat, name_swap_nvc)
df_all$Year <- as.character(df_all$Year)
df_all$Plot_ID <- sub("a$", "", df_all$Plot_ID)
df_hab <- df_all %>%
filter(NVC_FIRST == 'H' | BAP_broad == 'Dwarf Shrub Heath')
plot_feat(df_all, 'Species_richness')
plot_feat <- function(df, feature) {
df <- df[!is.na(df[ ,feature]),]
# PLotting according to year (next to each other showing change)
pp <- ggplot(df, aes(y=.data[[feature]], x=Year)) +
geom_boxplot() +
facet_wrap(.data[['BAP_broad']] ~ .) +
theme_bw() +
theme(axis.title=element_text(size=14)) +
ylim(c(0,25))# +
#geom_abline(intercept = coefs[1], slope = coefs[2])
print(pp)
}
plot_feat(df_hab, 'Species_richness')
setwd("C:/Users/kiera/Work/NE_work/Report")
getwd()
source('./data_prep_figure4.R')
################################################################################
name_swap_bap <- get_names('./dataframes/rename_habitat.csv')[[1]]
name_swap_nvc <- get_names('./dataframes/rename_habitat.csv')[[2]]
bb_list <- get_names('./dataframes/rename_habitat.csv')[[3]]
bp_list <- get_names('./dataframes/rename_habitat.csv')[[4]]
#df_all <- read_all_data('all_plots.csv')
df_all <- read_csv('./dataframes/all_plots.csv') %>%
fix_names(., name_swap_bap) %>%
# transform the eastings and northings into latitude and longitude
transform_coords(.) %>%
distinct(Plot_ID, Sitecode, Year, .keep_all = TRUE)
# Converts the NVC abbreviations to the full names
df_all$NVC_habitat <- name_swap(df_all$NVC_habitat, name_swap_nvc)
#df_all$Year <- as.character(df_all$Year)
df_all$Plot_ID <- sub("a$", "", df_all$Plot_ID)
df_hab <- df_all %>%
filter(NVC_FIRST == 'H' | BAP_broad == 'Dwarf Shrub Heath')
coefs <- coef(lm(Species_richness ~ Year, data = df_all))
print(coefs)
plot_feat2 <- function(df, feature) {
df <- df[!is.na(df[ ,feature]),]
# PLotting according to year (next to each other showing change)
pp <- ggplot(df, aes(y=.data[[feature]], x=Year)) +
geom_point() +
theme_bw() +
theme(axis.title=element_text(size=14)) +
ylim(c(0,25))# +
geom_abline(intercept = coefs[1], slope = coefs[2])
print(pp)
}
plot_feat2(df_hab, 'Species_richness')
plot_feat(df_site, 'Species_richness')
plot_feat <- function(df, feature) {
df <- df[!is.na(df[ ,feature]),]
# PLotting according to year (next to each other showing change)
pp <- ggplot(df, aes(y=.data[[feature]], x=Year)) +
geom_boxplot() +
facet_wrap(.data[['BAP_broad']] ~ .) +
theme_bw() +
theme(axis.title=element_text(size=14)) +
ylim(c(0,25))# +
#geom_abline(intercept = coefs[1], slope = coefs[2])
print(pp)
}
plot_feat(df_site, 'Species_richness')
plot_feat(df_hab, 'Species_richness')
df_hab2 <- df_hab
df_hab2$Year <- as.character(df_all$Year)
plot_feat(df_hab2, 'Species_richness')
df_hab2$Year <- as.character(df_hab2$Year)
plot_feat(df_hab2, 'Species_richness')
plot_feat2 <- function(df, feature) {
df <- df[!is.na(df[ ,feature]),]
# PLotting according to year (next to each other showing change)
pp <- ggplot(df, aes(y=.data[[feature]], x=Year)) +
geom_point() +
theme_bw() +
theme(axis.title=element_text(size=14)) +
ylim(c(0,25)) +
geom_abline(intercept = coefs[1], slope = coefs[2]) +
geom_smooth(method=lm)
print(pp)
}
plot_feat2(df_hab, 'Species_richness')
plot_feat2(df_hab, 'Species_richness')
plot_feat2 <- function(df, feature) {
df <- df[!is.na(df[ ,feature]),]
# PLotting according to year (next to each other showing change)
pp <- ggplot(df, aes(y=.data[[feature]], x=Year)) +
geom_point() +
theme_bw() +
theme(axis.title=element_text(size=14)) +
ylim(c(0,25)) +
geom_smooth(method=lm)
print(pp)
}
plot_feat2(df_hab, 'Species_richness')
