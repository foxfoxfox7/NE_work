change_map_int(total_change, 'bare x')
setwd("C:/Users/kiera/Work/NE_work/Report")
getwd()
source('./data_prep_figure4.R')
################################################################################
name_swap_bap <- get_names('rename_habitat.csv')[[1]]
name_swap_nvc <- get_names('rename_habitat.csv')[[2]]
bb_list <- get_names('rename_habitat.csv')[[3]]
bp_list <- get_names('rename_habitat.csv')[[4]]
#df_all <- read_all_data('presentation_surveys.xlsx')
#df_all <- read_excel("presentation_surveys.xlsx", sheet = "presentation_plots")
df_all <- read_csv('report_plots.csv')
# Taking the data from just one site
df <- filter(df_all, SITECODE == 'B14') %>%
# transform the eastings and northings into latitude and longitude
transform_coords(.) %>%
fix_names(., name_swap_bap)
df$YEAR <- as.character(df$YEAR)
df$Species_diversity <- round(df$Species_diversity, 2)
df$NVC_groupc <- name_swap(df$NVC_groupc, name_swap_nvc)
unique_years <- unique(df$YEAR)
unique_habs <- unique(df$BAP_BROAD)
unique_nvchabs <- unique(df$NVC_groupc)
total_change <- get_change_by_year(df)
################################################################################
change_map_int(total_change, 'bare x')
change_map_int(total_change, 'litter')
change_map_int(total_change, 'MEAN_HEIGHT')
change_map_int(total_change, 'LIGHT')
View(total_change)
source('./data_prep_figure4.R')
knitr::opts_chunk$set(echo = FALSE)
opts_chunk$set(fig.width=10, fig.height=7)
setwd('C:/Users/kiera/Work/NE_work/Report')
name_swap_bap <- get_names('rename_habitat.csv')[[1]]
name_swap_nvc <- get_names('rename_habitat.csv')[[2]]
bb_list <- get_names('rename_habitat.csv')[[3]]
bp_list <- get_names('rename_habitat.csv')[[4]]
#df_all <- read_all_data('all_plots.csv')
df_all <- read_csv('report_plots.csv')
site_code <- 'B12'
# Taking the data from just one site
df_site <- filter(df_all, SITECODE == site_code) %>%
fix_names(., name_swap_bap) %>%
# transform the eastings and northings into latitude and longitude
transform_coords(.)
# Converts the NVC abbreviations to the full names
df_site$NVC_groupc <- name_swap(df_site$NVC_groupc, name_swap_nvc)
df_site$YEAR <- as.character(df_site$YEAR)
df$Species_diversity <- round(df$Species_diversity, 2)
name_swap_bap <- get_names('rename_habitat.csv')[[1]]
name_swap_nvc <- get_names('rename_habitat.csv')[[2]]
bb_list <- get_names('rename_habitat.csv')[[3]]
bp_list <- get_names('rename_habitat.csv')[[4]]
#df_all <- read_all_data('all_plots.csv')
df_all <- read_csv('report_plots.csv')
site_code <- 'B12'
# Taking the data from just one site
df_site <- filter(df_all, SITECODE == site_code) %>%
fix_names(., name_swap_bap) %>%
# transform the eastings and northings into latitude and longitude
transform_coords(.)
# Converts the NVC abbreviations to the full names
df_site$NVC_groupc <- name_swap(df_site$NVC_groupc, name_swap_nvc)
df_site$YEAR <- as.character(df_site$YEAR)
df_site$Species_diversity <- round(df_site$Species_diversity, 2)
# PLOT 30 for Lullington is really weird and should be removed as it ruins the
# scale
# df_site <- df_site %>%
#   filter(PLOT_ID != 30) %>%
#   filter(PLOT_ID != '30a') %>%
#   filter(PLOT_ID != '30')
# Making the sub dataframes with only the major habitats selected
#object[[1]] is the data frame. object[[2]] is the list of habitats
df_site.bb <- select_by('BAP_BROAD', 20)
df_site.bp <- select_by('BAP_PRIORITY', 15)
df_site.nvcb <- select_by('NVC_groupb', 15)
df_site.nvcc <- select_by('NVC_groupc', 20)
# the centre points of the maps
east_cent <- get_centre_coords(df_site)[[1]]
north_cent <- get_centre_coords(df_site)[[2]]
unique_years <- unique(df_site$YEAR)
unique_habs <- unique(df_site$BAP_BROAD)
unique_nvchabs <- unique(df_site$NVC_groupc)
df_change <- get_change_by_year(df_site)
setwd("C:/Users/kiera/Work/NE_work/Report")
getwd()
source('./data_prep_figure4.R')
################################################################################
name_swap_bap <- get_names('rename_habitat.csv')[[1]]
name_swap_nvc <- get_names('rename_habitat.csv')[[2]]
bb_list <- get_names('rename_habitat.csv')[[3]]
bp_list <- get_names('rename_habitat.csv')[[4]]
#df_all <- read_all_data('presentation_surveys.xlsx')
#df_all <- read_excel("presentation_surveys.xlsx", sheet = "presentation_plots")
df_all <- read_csv('report_plots.csv')
# Taking the data from just one site
df <- filter(df_all, SITECODE == 'B14') %>%
# transform the eastings and northings into latitude and longitude
transform_coords(.) %>%
fix_names(., name_swap_bap)
df$YEAR <- as.character(df$YEAR)
df$Species_diversity <- round(df$Species_diversity, 2)
df$NVC_groupc <- name_swap(df$NVC_groupc, name_swap_nvc)
unique_years <- unique(df$YEAR)
unique_habs <- unique(df$BAP_BROAD)
unique_nvchabs <- unique(df$NVC_groupc)
total_change <- get_change_by_year(df)
################################################################################
map_habitats(df)
print(names(df))
print(df$NVC_FIRST)
source('./data_prep_figure4.R')
map_habitats(df)
